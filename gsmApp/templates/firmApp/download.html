{% extends 'firmApp/basic.html'%}
<marquee behavior="scroll" direction="left">{% block title %}Download {{Resource.title}} |{{Resource.Brand.title}} | {{Resource.Model.title}} | Firmware's {% endblock %} </marquee>
{% load static %}

{%block css %} 
<style>

.addpopup{
    position: fixed;
    top: 50%;
    left: 50%;
    width: 70%;
    transform: translate(-50%, -50%);
    background-color: white;
    border: 1px solid black;
    padding: 20px;
    text-align: center;
    z-index: 9999;

      }
.addimage{
    display: flex;
    align-items: center;
    justify-content: center;
}
.addimage img{
    padding: 10px;
    width: 100%;
    height: 100%;
}
   
</style>
{% endblock %}


{% block body %}

<nav class="container" aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/">Home</a></li>
      <li class="breadcrumb-item " aria-current="page"><a href="/brand/{{Resource.Brand.slug}}">{{Resource.Brand.slug}}</a></li>
      <li class="breadcrumb-item " aria-current="page"><a href="/model/{{Resource.Model.slug}}">{{Resource.Model.slug}}</a></li>
      <li class="breadcrumb-item " aria-current="page">{{Resource.title}}</li>
  
    
    </ol>
  </nav>

<div class="container">
    <div class="row">
      <div class="col-md-8">
        

{% if Resource.pro == False or get_pro or contributer %}
<div class=" First row mt-4">
    <div class="d-flex justify-content-center col-md-3">
      <img src="{% static 'firmApp/images/sample.jpg'%}" alt="" />
    </div>
    <div class="col-md-9">
      <p align="justify">
        Xiaomi Redmi Note 11 Pro 4G Indian with codename is vida Firmware
        includes Global Firmware (Global ROM), China Firmware (China ROM),
        Stable MIUI and Beta MIUI. This is full list of Xiaomi Redmi Note 11
        Pro 4G Indian. Xiaomi Redmi Note 11 Pro 4G Indian may called with
        other names like . China ROM, Firmware is for China region, there
        are only English, Chinese and No Google Services. Global ROM,
        Firmware is for Global region and almost can flash for China phone
        with unlocked bootloader. They have multilanguage and Google
        Services, china apps removed. All file download from MiFirm is Free.
        Fastboot firmware, ZIP firmware is official from Xiaomi. EU ROM,
        TWRP and Other files is unofficial. Use at your own risk.
      </p>

    </div>
  </div>
  <hr width="100%" size="10" />
<div class="row Second"> 
    <div class=" col-12">
        <div class="row mt-3">
            <div class="col-3">
                <h4>ID</h4>
            </div>
            <div class="col-6">
                <h5>{{Resource.id}}</h5>
            </div>
        </div>

        <div class="row mt-3">
            <div class="col-3">
                <h4>Brand</h4>
            </div>
            <div class="col-6">
                <h5>{{Resource.Brand.title}}</h5>
            </div>
        </div>

        <div class="row mt-3">
            <div class="col-3">
                <h4>Model</h4>
            </div>
            <div class="col-6">
                <h5>{{Resource.Model.title}}</h5>
            </div>
        </div>

        <div class="row mt-3">
            <div class="col-3">
                <h4>category</h4>
            </div>
            <div class="col-6">
                <h5>{{Resource.Categories.title}}</h5>
            </div>
        </div>

        <div class="row mt-3">
            <div class="col-3">
                <h4>version</h4>
            </div>
            <div class="col-6">
                <h5>{{Resource.title}}</h5>
            </div>
        </div>

        <div class="row mt-3">
            <div class="col-3">
                <h4>Size</h4>
            </div>
            <div class="col-6">
                <h5>{{Resource.size}}</h5>
            </div>
        </div>


        <div class="row mt-3">
            <div class="col-3">
                <h4>Tags</h4>
            </div>
            
            <div class="col-6">
                {% for i in Resource.Tags.all %}
               <span> {{i}}, </span>
                {% endfor %}
            </div>
            
        </div>


    </div>
</div>
<!-- <button type="button" class="btn btn-success my-3 d-flex justify-content-center">Download Here</button> -->
   
   <a href="{{Resource.file.url}}" onclick="incrementFileCount()" id="btnDownload" class="btn  btn-info mt-1">Download</a>
    
<hr width="100%" size="10" />
{% else %}
        <div class="row Second">
            <div class="col-md-12 col-12 mt-5 mb-5 ">
                <h2 class="mb-3">You can not access this file</h2>
                <h4 class="mb3">To download this file you need to:</h4>
                <ul style="list-style-type:square;">
                    <li><span>pay for this file </span><a href="/subscription/file-payment/{{Resource.id}}" class="btn btn-primary subscribe"
                        style="background: #373F27; border: none; margin-bottom: 15px;">Buy file</a>
                    </li>
                    <li><span>Buy a Subscription </span> <a href="{% url 'subscription' %}" class="btn btn-primary subscribe"
                        style="background: #373F27; border: none; margin-bottom: 15px;">Subscription</a>
                </ul>
               

            </div>
            
        </div>
{% endif %}

       
  
      </div>
    </div>
  </div>

  {% if Resource.pro == False %}
  <div class="addpopup" id="popUp">
    <div class="progress"  style="height: 15px;">
        <div class="progress-bar" id="progressbar" role="progressbar" aria-label="Example 20px high" style="width: 1%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
      <div class="addimage">
        <img src="/media/{{shortner_ads.image}}" alt="">
    </div>
    
  </div>
  {% endif %}

<script>
    
    const popup=document.getElementById("popUp") 
    if(popup){
        document.body.style.overflow = "hidden";
    
    var progressBar = document.getElementById("progressbar");
    var progressValue = 1;
  
    var timer= setInterval(function() {
      progressValue += 2;
      progressBar.style.width = progressValue + '%';

      if (progressValue>99) {
        clearInterval(timer);
     }
    }, 90);
    setTimeout(function () {
       popup.style.display="none"
       document.body.style.overflow = "auto"
     }, 5000);  
    }

    const resource = JSON.parse('{{ resource|safe }}');
    function incrementFileCount() {
      
        var url = `/subscription/increment-file-count/${resource.slug}`
	    	fetch(url, {
	    		method:'GET',
	    		headers:{
	    			'Content-Type':'applicaiton/json',
            
	    		}, 	
	    	})
	    	.then((response) => response.json())
	    	.then((data) => {
				console.log('Success:', data);
				
    })
}
</script>
{% endblock %}


