{% extends 'firmApp/basic.html'%}
{% load static %}
{% block css %}

{% endblock %}
{% block body %}
<div class="container">
    
    <div class="row">
      <div class="col-md-4">
        <h3 align="center">Payment</h3>
        <!-- <form method="get"> -->
          <div class="mb-3">
            <input type="text" name="name" class="form-control" placeholder="Card Holder Name" aria-describedby="emailHelp">
          </div>
          <div class="mb-3">
            <input type="text" name="number" class="form-control" placeholder="Card Number">
          </div>
          <div class="mb-3">
            <input type="text" name="month" class="form-control" placeholder="Month">
          </div>
          <div class="mb-3 d-flex">
            <input type="text" name="year" class="form-control" placeholder="Year">&nbsp
            <input type="text" name="cvv" class="form-control" placeholder="CVV">
          </div>
          
          
          <button type="submit" class="btn btn-success"><a href="/membership/{{slug}}">Make Payment</a></button>
        <!-- </form> -->
      </div>  <div id="paypal-button-container"></div>

      <!-- Include the PayPal JavaScript SDK -->
      <script src="https://www.paypal.com/sdk/js?client-id=AflzbYELrOEXzekaQhJcj98NjAhTbAFh-DGQliIMpQGLPUcQxyzt2lCkWYLIHMu5mjNm1riM-Xpk2bnx&currency=USD&disable-funding=card"></script>
  
      <script>
          // Render the PayPal button into #paypal-button-container
          paypal.Buttons({
  
              // Set up the transaction
              createOrder: function(data, actions) {
                  return actions.order.create({
                      purchase_units: [{
                          amount: {
                              value: '88.44'
                          }
                      }]
                  });
              },
  
              // Finalize the transaction
              onApprove: function(data, actions) {
                  return actions.order.capture().then(function(orderData) {
                      // Successful capture! For demo purposes:
                      console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));
                      var transaction = orderData.purchase_units[0].payments.captures[0];
                      alert('Transaction '+ transaction.status + ': ' + transaction.id + '\n\nSee console for all available details');
  
                      // Replace the above to show a success message within this page, e.g.
                      // const element = document.getElementById('paypal-button-container');
                      // element.innerHTML = '';
                      // element.innerHTML = '<h3>Thank you for your payment!</h3>';
                      // Or go to another URL:  actions.redirect('thank_you.html');
                  });
              }
  
  
          }).render('#paypal-button-container');
      </script>

    </div>
  
   
  </div>
  
{% endblock %}



{% block javascript %}
  <script src="{%static 'js/googlePay.js'%}"></script>

  <script
  async
  src="https://pay.google.com/gp/p/js/pay.js"
  onload="onGooglePayLoaded()">
</script>
{% endblock %}
